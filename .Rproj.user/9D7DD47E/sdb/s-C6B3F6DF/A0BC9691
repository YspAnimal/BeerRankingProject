{
    "contents" : "library(rvest)\nlibrary(reshape2)\n\n##Get Beer styles table\nGetBeerStylesDataframe <- function (link) {\n        beer_page <-\n                read_html(link) # Set WEB-page of beer ranking\n        beer_Groups <-\n                html_text(html_nodes(beer_page, \".groupname\")) # Get Global beer groups\n        beer_stylesHTML <-\n                html_nodes(beer_page, \".styleGroup\") # Get beer styles nodes\n        beer_stylesHTML <-\n                lapply(beer_stylesHTML, function(x) {\n                        html_nodes(x, \"li\")\n                }) # Prepare to transform to list\n        beer_styles <-\n                lapply(beer_stylesHTML, html_text) # Get list of beer styles\n        names(beer_styles) <- beer_Groups # Rename beer styles list\n        beer_styles <- melt(beer_styles) # melt list to data frame\n        beer_linksHTML <-\n                lapply(beer_stylesHTML, function(x) {\n                        html_nodes(x, \"a\")\n                }) # extract information about links\n        beer_links <-\n                lapply(beer_linksHTML, function(x) {\n                        html_attr(x, \"href\")\n                }) # Get beer styles links to own web page\n        beer_links <- unlist(beer_links) # Unlist it to vector\n        beer_styles <-\n                cbind(beer_styles, beer_links) # Create one data set, thet contains information about all of characteristic of beer\n        names(beer_styles) <-\n                c(\"Style\", \"Type\", \"Link\") # Rename columns in dataset\n        return(beer_styles)\n}\n\n##Get beers list from style link\n\nstylesFrame <- GetBeerStylesDataframe(\"http://www.ratebeer.com/beerstyles\")\n\nstyleLink <- as.vector(stylesFrame$Link[[1]])\nStylePage <- paste0(\"http://www.ratebeer.com\", styleLink)\n\n#GetBeersTable\n\n\n\nBeersTableHTML <- read_html(StylePage) \nScriptTXT <- html_nodes(BeersTableHTML, \"script\") \nScriptTXT <- html_text(ScriptTXT[9])\n\n\n\n\n\n\n\n\n\n##Test PhantomJS\n# write out a script phantomjs can process\n# library(RSelenium)\n# pJS <- phantom()\n# remDr <- remoteDriver(browserName = \"chrome\")\n# remDr$open()\n# remDr$navigate(StylePage)# process it with phantomjs\n# result <- remDr$phantomExecute(\"var page = http://www.ratebeer.com/beerstyles/abbey-dubbel/71/;\n#                                var fs = require('fs');\n#                                page.onLoadFinished = function(status) {\n#                                var file = fs.open('output.htm', \\\"w\\\");\n#                                file.write(page.content);\n#                                file.close();\n#                                phantom.exit();\n#                                };\")\n# \n\n\n\n\n# str(beer_styles)\n# \n# html_children(beer_stylesHTML[[1]])\n# \n#beer_stylesMatrix <- data.frame(sapply(beer_styles, '[', seq(max(sapply(beer_styles, length)))))\n###!!!Test scrapping\n# beer_stylespage <- read_html(\"http://www.ratebeer.com/beerstyles\")\n# beer_stylesUP <- html_nodes(beer_stylespage, \".groupname\")\n# beer_stylesCustomL <- html_nodes(beer_stylespage, \".styleGroup\")\n# beer_stylesCustom <- html_nodes(beer_stylesCustomL, \"a\")\n# \n# beer_stylesTable <- html_nodes(beer_stylespage, \".col-lg-12 table\")\n# \n# table\n# v <- html_text(beer_stylesCustom)\n# \n# html_text(beer_stylesCustom, trim = TRUE)\n# html_attrs(beer_stylesCustom)[[1]]\n# \n# \n# Ta <- html_table(beer_stylesTable, fill = TRUE)\n# html_table(beer_stylesCustom)\n# str",
    "created" : 1458631655343.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "2370121556",
    "id" : "A0BC9691",
    "lastKnownWriteTime" : 1459426771,
    "path" : "C:/R_repositories/OthersData/BeerRankingProject/WebScrapModule.R",
    "project_path" : "WebScrapModule.R",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 1,
    "source_on_save" : false,
    "type" : "r_source"
}